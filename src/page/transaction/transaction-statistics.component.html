<weui-sidebar-container>
    <weui-sidebar
        [(status)]="_status"
        [mode]="'over'"
        [position]="'cover'"
        [backdrop]="backdrop"
        (openStart)="openStart()"
        (opened)="opened()"
        (closeStart)="closeStart()"
        (closed)="closed()">
        <div class="sidebar_tab">
            <div class="weui-cells__title">
                <div class="weui-flex">
                    <div class="weui-flex__item">
                        <button weui-button [weui-mini]="'mini'" closeSidebar [weui-type]="'default'">关闭</button>
                    </div>
                    <div>
                        <button weui-button [weui-mini]="'mini'" closeSidebar [weui-type]="'default'" (click)="search('')">搜索</button>
                    </div>
                </div>
            </div>
            <div class="weui-cells">
                <div class="weui-cell weui-cell_select weui-cell_select-after">
                    <div class="weui-cell__hd">
                        <label for="" class="weui-label">医生：</label>
                    </div>
                    <div class="weui-cell__bd">
                        <select class="weui-select" name="doctor_id"  [(ngModel)]="searchInfo.doctor_id">
						       <option value="{{doctor.id}}" *ngFor="let doctor of doctorlist">{{doctor.realName}}</option>
                        </select>
                    </div>
                </div>
                <div class="weui-cell">
                    <div class="weui-cell__hd"><label class="weui-label">用户：</label></div>
                    <div class="weui-cell__bd">
                        <input class="weui-input" name="user_name" [(ngModel)]="searchInfo.user_name" placeholder="请输入用户名">
                    </div>
                </div>
                <div class="weui-cell weui-cell_select weui-cell_select-after">
                    <div class="weui-cell__hd">
                        <label for="" class="weui-label">科室：</label>
                    </div>
                    <div class="weui-cell__bd">
                        <select class="weui-select" name="service_id"  [(ngModel)]="searchInfo.service_id">
                               <option value="">请选择科室</option>
						       <option value="{{service.serviceId}}" *ngFor="let service of servicelist">{{service.serviceName}}</option>
                        </select>
                    </div>
                </div>
                <div class="weui-cell">
                    <div class="weui-cell__hd"><label for="" class="weui-label">时间：</label></div>
                    <div class="weui-cell__bd">
                        <input class="weui-input" [max]="searchInfo.l_time" name="date" type="date" [(ngModel)]="searchInfo.b_time">
                    </div>
                </div>
                <div class="weui-cell">
                    <div class="weui-cell__hd"><label for="" class="weui-label" >至：</label></div>
                    <div class="weui-cell__bd">
                        <input class="weui-input" [min]="searchInfo.b_time" name="date" type="date" value="" [(ngModel)]="searchInfo.l_time">
                    </div>
                </div>
            </div>
        </div>
    </weui-sidebar>
<div class="transaction-statistics-page">
    <weui-navbar>
        <weui-tab heading="接诊费用" (select)="changeType('1,3')">
            <weui-button class="ml10 mt10" weui-button [weui-plain]="true" [weui-type]="'default'" [weui-mini]="true" (click)="toggleOpened()">搜索</weui-button>
            <article class="weui-article"  *ngIf="tranList.length > 0">
                <div class="flex mt20 ml10">
                    <div class="flex-1">姓名</div>
                    <div class="flex-1">总收入</div>
                    <div class="flex-1">操作</div>
                </div>
                <div *ngFor="let tran of tranList; let index=index;" class="flex tran-list" [ngClass]="{'active': index % 2 == 1}">
                    <div class="flex-1">{{tran.childName ? tran.childName : tran.userName}}</div>
                    <div class="flex-1">{{tran.total}}</div>
                    <div class="flex-1"><button weui-button [weui-plain]="true" [weui-type]="'default'" [weui-mini]="true" class="" (click)="checkInfo(tran,'1')">详情</button></div>
                </div>
                <div class="flex ml10 mt10">
                    <div class="flex-1">总计</div>
                    <div class="flex-1">{{total.total}}</div>
                    <div class="flex-1  mr10"><button weui-button [weui-plain]="true" [weui-type]="'default'" [weui-mini]="true" class="" (click)="checkTotalInfo(total,'4')">详情</button></div>
                </div>
            </article>
            <div *ngIf="hasData && tranList.length == 0" class="mt10 ml10">
			     未查询到交易信息
		    </div>
        </weui-tab>
        <weui-tab heading="会员充值" (select)="changeType('2')">
            <weui-button class="ml10 mt10" weui-button [weui-plain]="true" [weui-type]="'default'" [weui-mini]="true" (click)="toggleOpened()">搜索</weui-button>
            <article class="weui-article" *ngIf="tranList.length > 0">
                <div class="flex mt20 ml10">
                    <div class="flex-1">姓名</div>
                    <div class="flex-1">总收入</div>
                    <div class="flex-1">操作</div>
                </div>
                <div *ngFor="let tran of tranList; let index=index;" class="flex tran-list" [ngClass]="{'active': index % 2 == 1}">
                    <div class="flex-1">{{tran.childName ? tran.childName : tran.userName}}</div>
                    <div class="flex-1">{{tran.total}}</div>
                    <div class="flex-1"><button weui-button [weui-plain]="true" [weui-type]="'default'" [weui-mini]="true" class="" (click)="checkInfo(tran,'2')">详情</button></div>
                </div>
                <div class="flex ml10 mt10">
                    <div class="flex-1">总计</div>
                    <div class="flex-1">{{total.total}}</div>
                    <div class="flex-1 mr10"><button weui-button [weui-plain]="true" [weui-type]="'default'" [weui-mini]="true" class="" (click)="checkTotalInfo(total,'5')">详情</button></div>
                </div>
            </article>
            <div *ngIf="hasData && tranList.length == 0" class="mt10 ml10">
			     未查询到交易信息
		    </div>
        </weui-tab>
        <weui-tab heading="药品零售" (select)="changeType('4')">
            <weui-button class="ml10 mt10" weui-button [weui-plain]="true" [weui-type]="'default'" [weui-mini]="true" (click)="toggleOpened()">搜索</weui-button>
            <article class="weui-article" *ngIf="tranList.length > 0">
                <div class="flex mt20 ml10">
                    <div class="flex-1">姓名</div>
                    <div class="flex-1">总收入</div>
                    <div class="flex-1">操作</div>
                </div>
                <div *ngFor="let tran of tranList; let index=index;" class="flex tran-list" [ngClass]="{'active': index % 2 == 1}">
                    <div class="flex-1">{{tran.childName ? tran.childName : tran.userName}}</div>
                    <div class="flex-1">{{tran.total}}</div>
                    <div class="flex-1"><button weui-button [weui-plain]="true" [weui-type]="'default'" [weui-mini]="true" class="" (click)="checkInfo(tran,'3')">详情</button></div>
                </div>
                <div class="flex ml10 mt10">
                    <div class="flex-1">总计</div>
                    <div class="flex-1">{{total.total}}</div>
                    <div class="flex-1 mr10"><button weui-button [weui-plain]="true" [weui-type]="'default'" [weui-mini]="true" class="" (click)="checkTotalInfo(total,'6')">详情</button></div>
                </div>
            </article>
            <div *ngIf="hasData && tranList.length == 0" class="mt10 ml10">
			     未查询到交易信息
		    </div>
        </weui-tab>
    </weui-navbar>
</div>
</weui-sidebar-container>
